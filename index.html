<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LMS Operational Control Center</title>
  <link rel="stylesheet" href="style-index.css" />
</head>

<!-- ðŸ”’ BODY STARTS LOCKED (NO FLICKER) -->
<body class="lms-hidden">

<!-- ðŸ” AUTH GATE (early, safe) -->
<script>
  if (sessionStorage.getItem("lms_logged_in") !== "true") {
    window.location.href = "login.html";
  }
</script>

<div class="container">

  <!-- Header -->
  <header class="header">
    <h1>Lab Management System</h1>
    <p>Zenni Optical USA Manufacturing Lab<br>Environment: Zenni USA</p>
    <button class="logout-btn" onclick="logout()">Logout</button>
  </header>

  <!-- Executive Status Strip -->
  <section class="status-strip">
    <div class="status-item">
      <span class="label">Investigation Hold Status</span>
      <span id="labStatus" class="value ok">Normal</span>
    </div>

    <div class="status-item">
      <span class="label">Active Holds</span>
      <span id="active" class="value">â€”</span>
    </div>

    <div class="status-item">
      <span class="label">Coverage</span>
      <span id="coverage" class="value">â€”</span>
    </div>

    <div class="status-item">
      <span class="label">Scanner Health</span>
      <span id="scannerHealth" class="value ok">Online</span>
    </div>

    <!-- ðŸ”¹ LAST JOB COMPLETED -->
    <div class="status-item">
      <span class="label">Last Job Completed</span>
      <span id="lastUpdate" class="value">â€”</span>
      <span id="lastSince" class="sub">â€”</span>
    </div>
  </section>

  <!-- Critical Operations -->
  <section class="section">
    <h2 class="section-title">Critical Operations</h2>
    <div class="cards two-col">

      <!-- Scanner Map -->
      <div
        id="scanner-card"
        class="card primary"
        data-gated
      >
        <h3>Scanner Map</h3>
        <p>Live scanner activity by port</p>
        <p class="sub">Finish Â· Surface Â· AR</p>

        <!-- ðŸ”¹ Dynamic scanner attention list -->
        <div id="scannerDetail" class="scanner-detail"></div>

        <button onclick="openPage('scanner-map.html')">
          Open Scanner Map
        </button>
      </div>

      <!-- Investigative Hold Tracker -->
      <div
        id="investigation-card"
        class="card highlight"
        data-gated
      >
        <h3>Investigative Hold Tracker</h3>
        <p>Active <strong><span id="activeHolds">â€”</span></strong></p>
        <p>Completed <strong><span id="completed">â€”</span></strong></p>
        <p>Coverage <strong><span id="coverageDetail">â€”</span></strong></p>
        <button onclick="openPage('page3.html')">
          View Investigation Hold
        </button>
      </div>

    </div>
  </section>

  <!-- Quality & Engineering -->
  <section class="section">
    <h2 class="section-title">Quality & Engineering</h2>
    <div class="cards">

      <div
        id="truecurve-card"
        class="card"
        data-gated
      >
        <h3>True Curve / Power Issues</h3>
        <p>Engineering exceptions & trends</p>
        <button onclick="openPage('true-curve.html')">
          View True Curve & Power Issues
        </button>
      </div>

    </div>
  </section>

  <!-- Tools -->
  <section class="section">
    <h2 class="section-title">Tools</h2>
    <div class="cards">

      <div
        id="tools-card"
        class="card"
        data-gated
      >
        <h3>Lens Uploads</h3>
        <p>In8 & In9 Format</p>
        <h4 id="lensCount">0</h4>
        <button onclick="openPage('in8-in9.html')">
          Open Tool
        </button>
      </div>

    </div>
  </section>

  <footer>
    LMS Tooling Â· Internal Use Only
  </footer>

</div>

<!-- MAIN SCRIPT -->
<script src="index.js"></script>

</body>
</html>
